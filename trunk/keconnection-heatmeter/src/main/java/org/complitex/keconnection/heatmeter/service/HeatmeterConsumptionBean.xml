<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.complitex.keconnection.heatmeter.service.HeatmeterConsumptionBean">
    <resultMap id="heatmeterConsumptionResultMap" type="org.complitex.keconnection.heatmeter.entity.HeatmeterConsumption">
        <id property="id"/>
        <result property="heatmeterId" column="heatmeter_id"/>
        <result property="heatmeterInputId" column="heatmeter_input_id"/>
        <result property="om"/>
        <result property="consumption1"/>
        <result property="consumption2"/>
        <result property="consumption3"/>
        <result property="beginDate" column="begin_date"/>
        <result property="endDate" column="end_date"/>
        <result property="status"/>
    </resultMap>

    <insert id="insertHeatmeterConsumption" parameterType="org.complitex.keconnection.heatmeter.entity.HeatmeterConsumption">
        insert into `heatmeter_consumption` (`heatmeter_id`, `readout_date`, `operating_month`, `consumption`,
                                             `consumption1`, `consumption2`, `consumption3`, `status`)
            values (#{heatmeterId}, #{readoutDate}, #{om}, #{consumption}, #{consumption1}, #{consumption2},
                    #{consumption3}, #{status})
    </insert>

    <update id="updateHeatmeterConsumption" parameterType="org.complitex.keconnection.heatmeter.entity.HeatmeterConsumption">
        update `heatmeter_consumption` set  `readout_date` = #{readoutDate}, `operating_month` = #{om},
            `consumption` = #{consumption}, `consumption1` = #{consumption1}, `consumption2` = #{consumption2},
            `consumption3` = #{consumption3}, `status` = #{status}
    </update>

    <delete id="deleteHeatmeterConsumption" parameterType="long">
        delete from `heatmeter_consumption` where `id` = #{id}
    </delete>

    <select id="selectHeatmeterConsumptionsByHeatmeterInputId" parameterType="long" resultMap="heatmeterConsumptionResultMap">
        select * from `heatmeter_consumption` where `heatmeter_input_id` = #{heatmeterInputId}
    </select>
    
</mapper>